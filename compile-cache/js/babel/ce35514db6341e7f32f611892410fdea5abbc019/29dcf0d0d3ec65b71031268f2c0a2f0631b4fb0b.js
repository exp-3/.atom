'use babel';

//
// Panics and stack backtraces parser.
//

Object.defineProperty(exports, '__esModule', {
  value: true
});
var path = require('path');

// Constants to detect links to Rust's source code and make them followable
var unixRustSrcPrefix = '../src/';
var windowsRustSrcPrefix = '..\\src\\';

var panicsCounter = 0; // Counts all panics

// Checks if the given file path returned by rustc or cargo points to the Rust source code
function isRustSourceLink(filePath) {
  return filePath.startsWith(unixRustSrcPrefix) || filePath.startsWith(windowsRustSrcPrefix);
}

// Shows panic info
function showPanic(panic) {
  // Only add link if we have panic.filePath, otherwise it's an external link
  atom.notifications.addError('A thread panicked at ' + (panic.filePath ? '<a id="' + panic.id + '" href="#">' : '') + 'line ' + panic.line + ' in ' + panic.file + (panic.filePath ? '</a>' : ''), {
    detail: panic.message,
    stack: panic.stack,
    dismissable: true
  });
  if (panic.filePath) {
    var link = document.getElementById(panic.id);
    if (link) {
      link.panic = panic;
      link.addEventListener('click', function (e) {
        atom.workspace.open(e.target.panic.filePath, {
          searchAllPanes: true,
          initialLine: e.target.panic.line - 1
        });
      });
    }
  }
}

// Tries to parse a stack trace. Returns the quantity of actually parsed lines.
function tryParseStackTrace(lines, i, panic) {
  var parsedQty = 0;
  var line = lines[i];
  if (line.substring(0, 16) === 'stack backtrace:') {
    parsedQty += 1;
    var panicLines = [];
    for (var j = i + 1; j < lines.length; j++) {
      line = lines[j];
      var matchFunc = /^(\s+\d+):\s+0x[a-f0-9]+ - (?:(.+)::h[0-9a-f]+|(.+))$/g.exec(line);
      if (matchFunc) {
        // A line with a function call
        if (atom.config.get('build-cargo.backtraceType') === 'Compact') {
          line = matchFunc[1] + ':  ' + (matchFunc[2] || matchFunc[3]);
        }
        panicLines.push(line);
      } else {
        var matchLink = /(at (.+):(\d+))$/g.exec(line);
        if (matchLink) {
          // A line with a file link
          if (!panic.file && !isRustSourceLink(matchLink[2])) {
            panic.file = matchLink[2]; // Found a link to our source code
            panic.line = matchLink[3];
          }
          panicLines.push('  ' + matchLink[1]); // less leading spaces
        } else {
            // Stack trace has ended
            break;
          }
      }
      parsedQty += 1;
    }
    panic.stack = panicLines.join('\n');
  }
  return parsedQty;
}

// Tries to parse a panic and its stack trace. Returns the quantity of actually
// parsed lines.
var tryParsePanic = function tryParsePanic(lines, i, show, buildWorkDir) {
  var line = lines[i];
  var match = /(thread '.+' panicked at '.+'), ([^\/][^\:]+):(\d+)/g.exec(line);
  var parsedQty = 0;
  if (match) {
    parsedQty = 1;
    var panic = {
      id: 'build-cargo-panic-' + ++panicsCounter, // Unique panic ID
      message: match[1],
      file: isRustSourceLink(match[2]) ? undefined : match[2],
      filePath: undefined,
      line: parseInt(match[3], 10),
      stack: undefined
    };
    parsedQty = 1 + tryParseStackTrace(lines, i + 1, panic);
    if (panic.file) {
      panic.filePath = path.isAbsolute(panic.file) ? panic.file : path.join(buildWorkDir, panic.file);
    } else {
      panic.file = match[2]; // We failed to find a link to our source code, use Rust's
    }
    if (show) {
      showPanic(panic);
    }
  }
  return parsedQty;
};

exports.tryParsePanic = tryParsePanic;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Rha2Fha2kvLmF0b20vcGFja2FnZXMvYnVpbGQtY2FyZ28vbGliL3BhbmljLXBhcnNlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxXQUFXLENBQUM7Ozs7Ozs7OztBQU1aLElBQU0sSUFBSSxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQzs7O0FBRzdCLElBQU0saUJBQWlCLEdBQUcsU0FBUyxDQUFDO0FBQ3BDLElBQU0sb0JBQW9CLEdBQUcsV0FBVyxDQUFDOztBQUV6QyxJQUFJLGFBQWEsR0FBRyxDQUFDLENBQUM7OztBQUd0QixTQUFTLGdCQUFnQixDQUFDLFFBQVEsRUFBRTtBQUNsQyxTQUFPLFFBQVEsQ0FBQyxVQUFVLENBQUMsaUJBQWlCLENBQUMsSUFBSSxRQUFRLENBQUMsVUFBVSxDQUFDLG9CQUFvQixDQUFDLENBQUM7Q0FDNUY7OztBQUdELFNBQVMsU0FBUyxDQUFDLEtBQUssRUFBRTs7QUFFeEIsTUFBSSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQ3pCLHVCQUF1QixJQUNoQixLQUFLLENBQUMsUUFBUSxHQUFHLFNBQVMsR0FBRyxLQUFLLENBQUMsRUFBRSxHQUFHLGFBQWEsR0FBRyxFQUFFLENBQUEsQUFBQyxHQUM1RCxPQUFPLEdBQUcsS0FBSyxDQUFDLElBQUksR0FBRyxNQUFNLEdBQUcsS0FBSyxDQUFDLElBQUksSUFDekMsS0FBSyxDQUFDLFFBQVEsR0FBRyxNQUFNLEdBQUcsRUFBRSxDQUFBLEFBQUMsRUFBRTtBQUNoQyxVQUFNLEVBQUUsS0FBSyxDQUFDLE9BQU87QUFDckIsU0FBSyxFQUFFLEtBQUssQ0FBQyxLQUFLO0FBQ2xCLGVBQVcsRUFBRSxJQUFJO0dBQ2xCLENBQUMsQ0FBQztBQUNULE1BQUksS0FBSyxDQUFDLFFBQVEsRUFBRTtBQUNsQixRQUFNLElBQUksR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUMvQyxRQUFJLElBQUksRUFBRTtBQUNS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QWEsQUFBQztBQUM1QyxhQUFPLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQztBQUNqQixVQUFJLEVBQUUsZ0JBQWdCLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsU0FBUyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUM7QUFDdkQsY0FBUSxFQUFFLFNBQVM7QUFDbkIsVUFBSSxFQUFFLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDO0FBQzVCLFdBQUssRUFBRSxTQUFTO0tBQ2pCLENBQUM7QUFDRixhQUFTLEdBQUcsQ0FBQyxHQUFHLGtCQUFrQixDQUFDLEtBQUssRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDO0FBQ3hELFFBQUksS0FBSyxDQUFDLElBQUksRUFBRTtBQUNkLFdBQUssQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsS0FBSyxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFlBQVksRUFBRSxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7S0FDakcsTUFBTTtBQUNMLFdBQUssQ0FBQyxJQUFJLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO0tBQ3ZCO0FBQ0QsUUFBSSxJQUFJLEVBQUU7QUFDUixlQUFTLENBQUMsS0FBSyxDQUFDLENBQUM7S0FDbEI7R0FDRjtBQUNELFNBQU8sU0FBUyxDQUFDO0NBQ2xCLENBQUM7O1FBRU8sYUFBYSxHQUFiLGFBQWEiLCJmaWxlIjoiL2hvbWUvdGFrYWFraS8uYXRvbS9wYWNrYWdlcy9idWlsZC1jYXJnby9saWIvcGFuaWMtcGFyc2VyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBiYWJlbCc7XG5cbi8vXG4vLyBQYW5pY3MgYW5kIHN0YWNrIGJhY2t0cmFjZXMgcGFyc2VyLlxuLy9cblxuY29uc3QgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcblxuLy8gQ29uc3RhbnRzIHRvIGRldGVjdCBsaW5rcyB0byBSdXN0J3Mgc291cmNlIGNvZGUgYW5kIG1ha2UgdGhlbSBmb2xsb3dhYmxlXG5jb25zdCB1bml4UnVzdFNyY1ByZWZpeCA9ICcuLi9zcmMvJztcbmNvbnN0IHdpbmRvd3NSdXN0U3JjUHJlZml4ID0gJy4uXFxcXHNyY1xcXFwnO1xuXG5sZXQgcGFuaWNzQ291bnRlciA9IDA7ICAgLy8gQ291bnRzIGFsbCBwYW5pY3NcblxuLy8gQ2hlY2tzIGlmIHRoZSBnaXZlbiBmaWxlIHBhdGggcmV0dXJuZWQgYnkgcnVzdGMgb3IgY2FyZ28gcG9pbnRzIHRvIHRoZSBSdXN0IHNvdXJjZSBjb2RlXG5mdW5jdGlvbiBpc1J1c3RTb3VyY2VMaW5rKGZpbGVQYXRoKSB7XG4gIHJldHVybiBmaWxlUGF0aC5zdGFydHNXaXRoKHVuaXhSdXN0U3JjUHJlZml4KSB8fCBmaWxlUGF0aC5zdGFydHNXaXRoKHdpbmRvd3NSdXN0U3JjUHJlZml4KTtcbn1cblxuLy8gU2hvd3MgcGFuaWMgaW5mb1xuZnVuY3Rpb24gc2hvd1BhbmljKHBhbmljKSB7XG4gIC8vIE9ubHkgYWRkIGxpbmsgaWYgd2UgaGF2ZSBwYW5pYy5maWxlUGF0aCwgb3RoZXJ3aXNlIGl0J3MgYW4gZXh0ZXJuYWwgbGlua1xuICBhdG9tLm5vdGlmaWNhdGlvbnMuYWRkRXJyb3IoXG4gICAgJ0EgdGhyZWFkIHBhbmlja2VkIGF0ICdcbiAgICAgICAgKyAocGFuaWMuZmlsZVBhdGggPyAnPGEgaWQ9XCInICsgcGFuaWMuaWQgKyAnXCIgaHJlZj1cIiNcIj4nIDogJycpXG4gICAgICAgICsgJ2xpbmUgJyArIHBhbmljLmxpbmUgKyAnIGluICcgKyBwYW5pYy5maWxlXG4gICAgICAgICsgKHBhbmljLmZpbGVQYXRoID8gJzwvYT4nIDogJycpLCB7XG4gICAgICAgICAgZGV0YWlsOiBwYW5pYy5tZXNzYWdlLFxuICAgICAgICAgIHN0YWNrOiBwYW5pYy5zdGFjayxcbiAgICAgICAgICBkaXNtaXNzYWJsZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgaWYgKHBhbmljLmZpbGVQYXRoKSB7XG4gICAgY29uc3QgbGluayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHBhbmljLmlkKTtcbiAgICBpZiAobGluaykge1xuICAgICAgbGluay5wYW5pYyA9IHBhbmljO1xuICAgICAgbGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGF0b20ud29ya3NwYWNlLm9wZW4oZS50YXJnZXQucGFuaWMuZmlsZVBhdGgsIHtcbiAgICAgICAgICBzZWFyY2hBbGxQYW5lczogdHJ1ZSxcbiAgICAgICAgICBpbml0aWFsTGluZTogZS50YXJnZXQucGFuaWMubGluZSAtIDFcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn1cblxuLy8gVHJpZXMgdG8gcGFyc2UgYSBzdGFjayB0cmFjZS4gUmV0dXJucyB0aGUgcXVhbnRpdHkgb2YgYWN0dWFsbHkgcGFyc2VkIGxpbmVzLlxuZnVuY3Rpb24gdHJ5UGFyc2VTdGFja1RyYWNlKGxpbmVzLCBpLCBwYW5pYykge1xuICBsZXQgcGFyc2VkUXR5ID0gMDtcbiAgbGV0IGxpbmUgPSBsaW5lc1tpXTtcbiAgaWYgKGxpbmUuc3Vic3RyaW5nKDAsIDE2KSA9PT0gJ3N0YWNrIGJhY2t0cmFjZTonKSB7XG4gICAgcGFyc2VkUXR5ICs9IDE7XG4gICAgY29uc3QgcGFuaWNMaW5lcyA9IFtdO1xuICAgIGZvciAobGV0IGogPSBpICsgMTsgaiA8IGxpbmVzLmxlbmd0aDsgaisrKSB7XG4gICAgICBsaW5lID0gbGluZXNbal07XG4gICAgICBjb25zdCBtYXRjaEZ1bmMgPSAvXihcXHMrXFxkKyk6XFxzKzB4W2EtZjAtOV0rIC0gKD86KC4rKTo6aFswLTlhLWZdK3woLispKSQvZy5leGVjKGxpbmUpO1xuICAgICAgaWYgKG1hdGNoRnVuYykge1xuICAgICAgICAvLyBBIGxpbmUgd2l0aCBhIGZ1bmN0aW9uIGNhbGxcbiAgICAgICAgaWYgKGF0b20uY29uZmlnLmdldCgnYnVpbGQtY2FyZ28uYmFja3RyYWNlVHlwZScpID09PSAnQ29tcGFjdCcpIHtcbiAgICAgICAgICBsaW5lID0gbWF0Y2hGdW5jWzFdICsgJzogICcgKyAobWF0Y2hGdW5jWzJdIHx8IG1hdGNoRnVuY1szXSk7XG4gICAgICAgIH1cbiAgICAgICAgcGFuaWNMaW5lcy5wdXNoKGxpbmUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgbWF0Y2hMaW5rID0gLyhhdCAoLispOihcXGQrKSkkL2cuZXhlYyhsaW5lKTtcbiAgICAgICAgaWYgKG1hdGNoTGluaykge1xuICAgICAgICAgIC8vIEEgbGluZSB3aXRoIGEgZmlsZSBsaW5rXG4gICAgICAgICAgaWYgKCFwYW5pYy5maWxlICYmICFpc1J1c3RTb3VyY2VMaW5rKG1hdGNoTGlua1syXSkpIHtcbiAgICAgICAgICAgIHBhbmljLmZpbGUgPSBtYXRjaExpbmtbMl07ICAgIC8vIEZvdW5kIGEgbGluayB0byBvdXIgc291cmNlIGNvZGVcbiAgICAgICAgICAgIHBhbmljLmxpbmUgPSBtYXRjaExpbmtbM107XG4gICAgICAgICAgfVxuICAgICAgICAgIHBhbmljTGluZXMucHVzaCgnICAnICsgbWF0Y2hMaW5rWzFdKTsgLy8gbGVzcyBsZWFkaW5nIHNwYWNlc1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFN0YWNrIHRyYWNlIGhhcyBlbmRlZFxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBwYXJzZWRRdHkgKz0gMTtcbiAgICB9XG4gICAgcGFuaWMuc3RhY2sgPSBwYW5pY0xpbmVzLmpvaW4oJ1xcbicpO1xuICB9XG4gIHJldHVybiBwYXJzZWRRdHk7XG59XG5cbi8vIFRyaWVzIHRvIHBhcnNlIGEgcGFuaWMgYW5kIGl0cyBzdGFjayB0cmFjZS4gUmV0dXJucyB0aGUgcXVhbnRpdHkgb2YgYWN0dWFsbHlcbi8vIHBhcnNlZCBsaW5lcy5cbmNvbnN0IHRyeVBhcnNlUGFuaWMgPSAobGluZXMsIGksIHNob3csIGJ1aWxkV29ya0RpcikgPT4ge1xuICBjb25zdCBsaW5lID0gbGluZXNbaV07XG4gIGNvbnN0IG1hdGNoID0gLyh0aHJlYWQgJy4rJyBwYW5pY2tlZCBhdCAnLisnKSwgKFteXFwvXVteXFw6XSspOihcXGQrKS9nLmV4ZWMobGluZSk7XG4gIGxldCBwYXJzZWRRdHkgPSAwO1xuICBpZiAobWF0Y2gpIHtcbiAgICBwYXJzZWRRdHkgPSAxO1xuICAgIGNvbnN0IHBhbmljID0ge1xuICAgICAgaWQ6ICdidWlsZC1jYXJnby1wYW5pYy0nICsgKCsrcGFuaWNzQ291bnRlciksIC8vIFVuaXF1ZSBwYW5pYyBJRFxuICAgICAgbWVzc2FnZTogbWF0Y2hbMV0sXG4gICAgICBmaWxlOiBpc1J1c3RTb3VyY2VMaW5rKG1hdGNoWzJdKSA/IHVuZGVmaW5lZCA6IG1hdGNoWzJdLFxuICAgICAgZmlsZVBhdGg6IHVuZGVmaW5lZCxcbiAgICAgIGxpbmU6IHBhcnNlSW50KG1hdGNoWzNdLCAxMCksXG4gICAgICBzdGFjazogdW5kZWZpbmVkXG4gICAgfTtcbiAgICBwYXJzZWRRdHkgPSAxICsgdHJ5UGFyc2VTdGFja1RyYWNlKGxpbmVzLCBpICsgMSwgcGFuaWMpO1xuICAgIGlmIChwYW5pYy5maWxlKSB7XG4gICAgICBwYW5pYy5maWxlUGF0aCA9IHBhdGguaXNBYnNvbHV0ZShwYW5pYy5maWxlKSA/IHBhbmljLmZpbGUgOiBwYXRoLmpvaW4oYnVpbGRXb3JrRGlyLCBwYW5pYy5maWxlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcGFuaWMuZmlsZSA9IG1hdGNoWzJdOyAgLy8gV2UgZmFpbGVkIHRvIGZpbmQgYSBsaW5rIHRvIG91ciBzb3VyY2UgY29kZSwgdXNlIFJ1c3Qnc1xuICAgIH1cbiAgICBpZiAoc2hvdykge1xuICAgICAgc2hvd1BhbmljKHBhbmljKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHBhcnNlZFF0eTtcbn07XG5cbmV4cG9ydCB7IHRyeVBhcnNlUGFuaWMgfTtcbiJdfQ==
//# sourceURL=/home/takaaki/.atom/packages/build-cargo/lib/panic-parser.js
